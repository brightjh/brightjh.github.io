<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL 语句 | THIS BLOG</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/hero.png">
    <meta name="description" content="技术永无止境">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.4552e9ca.js" as="script"><link rel="preload" href="/assets/js/2.245720e2.js" as="script"><link rel="preload" href="/assets/js/19.38817534.js" as="script"><link rel="prefetch" href="/assets/js/10.06910aeb.js"><link rel="prefetch" href="/assets/js/11.5b4b7b4c.js"><link rel="prefetch" href="/assets/js/12.155fcbdf.js"><link rel="prefetch" href="/assets/js/13.f9ccf780.js"><link rel="prefetch" href="/assets/js/14.14705abe.js"><link rel="prefetch" href="/assets/js/15.b87cab04.js"><link rel="prefetch" href="/assets/js/16.425537b3.js"><link rel="prefetch" href="/assets/js/17.e2638f62.js"><link rel="prefetch" href="/assets/js/18.f0b685d6.js"><link rel="prefetch" href="/assets/js/20.2f9cdc7e.js"><link rel="prefetch" href="/assets/js/21.84856f28.js"><link rel="prefetch" href="/assets/js/22.d6e3cb56.js"><link rel="prefetch" href="/assets/js/23.3c4f0a3c.js"><link rel="prefetch" href="/assets/js/24.0a8a564b.js"><link rel="prefetch" href="/assets/js/25.b27ac857.js"><link rel="prefetch" href="/assets/js/26.df7facb1.js"><link rel="prefetch" href="/assets/js/27.8f6aa3ed.js"><link rel="prefetch" href="/assets/js/3.292fd8e0.js"><link rel="prefetch" href="/assets/js/4.abb1af30.js"><link rel="prefetch" href="/assets/js/5.6895aa85.js"><link rel="prefetch" href="/assets/js/6.25c18510.js"><link rel="prefetch" href="/assets/js/7.45169419.js"><link rel="prefetch" href="/assets/js/8.901de557.js"><link rel="prefetch" href="/assets/js/9.da28008d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">THIS BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  高级篇
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具篇
</a></div><div class="nav-item"><a href="/basics/" class="nav-link router-link-active">
  基础篇
</a></div><div class="nav-item"><a href="https://github.com/brightjh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  高级篇
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具篇
</a></div><div class="nav-item"><a href="/basics/" class="nav-link router-link-active">
  基础篇
</a></div><div class="nav-item"><a href="https://github.com/brightjh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/basics/" aria-current="page" class="sidebar-link">基础篇</a></li><li><a href="/basics/我的LeetCode算法笔记.html" class="sidebar-link">LeetCode</a></li><li><a href="/basics/数据结构.html" class="sidebar-link">数据结构</a></li><li><a href="/basics/集合体系.html" class="sidebar-link">集合体系</a></li><li><a href="/basics/Java常用API.html" class="sidebar-link">Java常用API</a></li><li><a href="/basics/SQL 语句.html" class="active sidebar-link">SQL 语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/basics/SQL 语句.html#ddl" class="sidebar-link">DDL</a></li><li class="sidebar-sub-header"><a href="/basics/SQL 语句.html#dml" class="sidebar-link">DML</a></li><li class="sidebar-sub-header"><a href="/basics/SQL 语句.html#dql" class="sidebar-link">DQL</a></li><li class="sidebar-sub-header"><a href="/basics/SQL 语句.html#dcl" class="sidebar-link">DCL</a></li><li class="sidebar-sub-header"><a href="/basics/SQL 语句.html#约束" class="sidebar-link">约束</a></li><li class="sidebar-sub-header"><a href="/basics/SQL 语句.html#多表关系" class="sidebar-link">多表关系</a></li><li class="sidebar-sub-header"><a href="/basics/SQL 语句.html#多表查询" class="sidebar-link">多表查询</a></li></ul></li><li><a href="/basics/设计模式.html" class="sidebar-link">设计模式</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sql-语句"><a href="#sql-语句" class="header-anchor">#</a> SQL 语句</h1> <h2 id="ddl"><a href="#ddl" class="header-anchor">#</a> DDL</h2> <blockquote><p>数据库定义语言，用来定义数据库对象：数据库，表，列等</p></blockquote> <ul><li>操作数据库</li></ul> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- DDL</span>

<span class="token comment">-- 查询数据库</span>
<span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span> <span class="token punctuation">;</span>

<span class="token comment">-- 创建数据库</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> 数据库名称<span class="token punctuation">;</span>
<span class="token comment">-- 判断数据库是否存在,不存在则创建</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> 数据库名称<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> 数据库名称<span class="token punctuation">;</span>

<span class="token comment">-- 删除数据库</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> 数据库名称<span class="token punctuation">;</span>
<span class="token comment">-- 存在则删除</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> 数据库名称<span class="token punctuation">;</span>

<span class="token comment">-- 使用数据库</span>
<span class="token comment">-- 查看当前使用的数据库</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 使用</span>
<span class="token keyword">USE</span> 数据库名称<span class="token punctuation">;</span>
</code></pre></div><ul><li>操作数据表</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询当前数据库下的所有表名称</span>
<span class="token keyword">SHOW</span> <span class="token keyword">TABLES</span> <span class="token punctuation">;</span>
<span class="token comment">-- 查询表结构</span>
<span class="token keyword">DESC</span> 表名称<span class="token punctuation">;</span>

<span class="token comment">-- 创建表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名称<span class="token punctuation">(</span>
    字段名 字段类型<span class="token punctuation">,</span>
    字段名 字段类型<span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    字段名 字段类型
    <span class="token comment">-- 最后一行没有逗号</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 修改表</span>
<span class="token comment">-- 1.修改表名</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名称 <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> 新的表名称<span class="token punctuation">;</span>
<span class="token comment">-- 2.添加列</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名称 <span class="token keyword">ADD</span> 列名 数据类型<span class="token punctuation">;</span>
<span class="token comment">-- 3.修改数据类型</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名称 <span class="token keyword">MODIFY</span> 要修改的列名 新的数据类型<span class="token punctuation">;</span>
<span class="token comment">-- 4.修改列名和数据类型</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名称 CHANGE 旧列名 新的列名 新的数据类型<span class="token punctuation">;</span>
<span class="token comment">-- 5.删除列</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名称 <span class="token keyword">DROP</span> 列名称<span class="token punctuation">;</span>

<span class="token comment">-- 删除表</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> 表名称<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> 表名称<span class="token punctuation">;</span>

</code></pre></div><h2 id="dml"><a href="#dml" class="header-anchor">#</a> DML</h2> <blockquote><p>数据操作语言，用来对数据表中的数据进行增删改查</p></blockquote> <ul><li>添加数据</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 给指定列添加数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students<span class="token punctuation">(</span>列一<span class="token punctuation">,</span> 列二<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span>值一，值二<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 给所有列添加数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students<span class="token punctuation">(</span>全部列<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span>全部值<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 批量添加数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students<span class="token punctuation">(</span>列一，列二，列三<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span>值一，值二<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span>值一，值二<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span>值一，值二<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>修改和删除数据</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 修改数据</span>
<span class="token keyword">UPDATE</span> 表名
<span class="token keyword">SET</span> 列一 <span class="token operator">=</span> 新值<span class="token punctuation">,</span>
    列二 <span class="token operator">=</span> 新值<span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">WHERE</span> 筛选条件<span class="token punctuation">;</span>


<span class="token comment">-- 删除数据</span>
<span class="token keyword">DELETE</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 筛选条件<span class="token punctuation">;</span>
</code></pre></div><h2 id="dql"><a href="#dql" class="header-anchor">#</a> DQL</h2> <blockquote><p>数据查询语言，用来查询数据库中表的记录（数据）</p></blockquote> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
	字段
<span class="token keyword">FROM</span>
	表
<span class="token keyword">WHERE</span>
	条件
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	分组字段
<span class="token keyword">HAVING</span>
	分组后条件
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	排序字段
<span class="token keyword">LIMIT</span>
	分页限定
</code></pre></div><ul><li>基础查询</li></ul> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 基础查询 ====================</span>
<span class="token comment">-- 查询name,age 两列</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 查询所有列的数据，</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 去除重复记录</span>
<span class="token keyword">SELECT</span> address
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> address
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 起别名</span>
<span class="token keyword">SELECT</span> math <span class="token keyword">AS</span> 数学<span class="token punctuation">,</span> english <span class="token keyword">AS</span> 英语<span class="token punctuation">,</span> address <span class="token keyword">AS</span> 地址
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>


</code></pre></div><ul><li>条件查询（WHERE）</li></ul> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 条件查询 ============================</span>
<span class="token comment">-- 1.查询年龄大于20岁的学员信息</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">,</span> hire_date
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token comment">-- 2.查询年龄大于等于20岁的学员信息</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> age <span class="token operator">&gt;=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token comment">-- 3.查询年龄大于等于20岁 并且 年龄 小于等于 30 岁的学员信息</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> age <span class="token operator">&gt;=</span> <span class="token number">20</span>
  <span class="token operator">AND</span> age <span class="token operator">&lt;=</span> <span class="token number">30</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> age <span class="token operator">BETWEEN</span> <span class="token number">20</span> <span class="token operator">AND</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token comment">-- 4.查询入学日期‘1998-09-01’到‘1999-09-01’之间的学员信息</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">,</span> hire_date
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> hire_date <span class="token operator">BETWEEN</span> <span class="token string">'1998-09-01'</span> <span class="token operator">AND</span> <span class="token string">'1999-09-01'</span><span class="token punctuation">;</span>
<span class="token comment">-- 5.查询年龄等于18岁的学员信息</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token comment">-- 6.查询年龄不等于18岁的学员信息</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> age <span class="token operator">!=</span> <span class="token number">18</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> age <span class="token operator">&lt;&gt;</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token comment">-- 7.查询年龄等于18岁 或者 年龄等于20岁 或者 年龄等于22岁的学员信息</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> age <span class="token operator">=</span> <span class="token number">18</span>
   <span class="token operator">OR</span> age <span class="token operator">=</span> <span class="token number">20</span>
   <span class="token operator">OR</span> age <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> age <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 8.查询英语成绩为NULL的学员信息</span>
<span class="token comment">-- NULL 的比较不能使用 =  ！= ；需要使用 IS  IS NOT</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> english <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token comment">-- 模糊查询 ================</span>
<span class="token comment">-- 1. 查询姓‘马’的学员信息</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">'马%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 2.查询第二个字是‘花’的学员信息</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">'_花%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 3.查询名字中包含‘德’的学员信息</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">'%德%'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>排序查询（ORDER BY）</li></ul> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 排序查询 =====================</span>
<span class="token comment">-- 1.查询学生信息，按照年龄升序排列</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> age <span class="token keyword">ASC</span><span class="token punctuation">;</span>
<span class="token comment">-- 2.查询学生信息，按照数学成绩降序排列</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> math <span class="token keyword">DESC</span><span class="token punctuation">;</span>
<span class="token comment">-- 3.查询学生信息，按照数学成绩降序排列，如果数学成绩一样，再按照英语成绩进行升序排列</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english
<span class="token keyword">FROM</span> stu
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> math <span class="token keyword">DESC</span><span class="token punctuation">,</span> english <span class="token keyword">ASC</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>分组查询（GROUP BY）</li></ul> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 聚合函数 =====================</span>
<span class="token comment">-- NULL值统一不参与计算</span>
<span class="token comment">-- 1.查询班级一共有多少个学生</span>
<span class="token comment">-- 一般取值为主键或者*</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 2.查询数学成绩的最高分</span>
<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 3.查询数学成绩最低分</span>
<span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 4.查询数学成绩总分</span>
<span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 5.查询数学成绩的平均分</span>
<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 6.查询英语成绩最低分</span>
<span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>english<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>

<span class="token comment">-- 分组函数 =================================</span>
<span class="token comment">-- 注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义</span>
<span class="token comment">-- 1.查询男同学和女同学各自的数学平均分</span>
<span class="token keyword">SELECT</span> sex<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> sex<span class="token punctuation">;</span>
<span class="token comment">-- 2.查询男同学和女同学各自的数学平均分，以及各自人数</span>
<span class="token keyword">SELECT</span> sex<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> sex<span class="token punctuation">;</span>
<span class="token comment">-- 3.查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70的不参与分组</span>
<span class="token keyword">SELECT</span> sex<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> math <span class="token operator">&gt;=</span> <span class="token number">70</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> sex<span class="token punctuation">;</span>
<span class="token comment">-- 4.查询男同学和女同学各自的数学平均分，以及各自人数，</span>
<span class="token comment">-- 要求：分数低于70分的不参与分组，分组之后人数大于2的才能显示</span>
<span class="token keyword">SELECT</span> sex<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> stu
<span class="token keyword">WHERE</span> math <span class="token operator">&gt;=</span> <span class="token number">70</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> sex
<span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>分页查询</li></ul> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 分页查询 ============================</span>
<span class="token comment">-- 起始索引从0开始</span>
<span class="token comment">-- 1.从零开始查询，查询3条数据</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">,</span> hire_date
<span class="token keyword">FROM</span> stu
<span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- 2.每页显示3条数据，查询第一页数据</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>address<span class="token punctuation">,</span>math<span class="token punctuation">,</span>english<span class="token punctuation">,</span>hire_date
<span class="token keyword">FROM</span> stu
<span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- 3.每页显示3条数据，查询第二页数据</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>address<span class="token punctuation">,</span>math<span class="token punctuation">,</span>english<span class="token punctuation">,</span>hire_date
<span class="token keyword">FROM</span> stu
<span class="token keyword">LIMIT</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- 4.每页显示3条数据，查询第三页数据</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>address<span class="token punctuation">,</span>math<span class="token punctuation">,</span>english<span class="token punctuation">,</span>hire_date
<span class="token keyword">FROM</span> stu
<span class="token keyword">LIMIT</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- 起始索引 = （当前页码-1）* 每页显示的条数 </span>
</code></pre></div><h2 id="dcl"><a href="#dcl" class="header-anchor">#</a> DCL</h2> <blockquote><p>数据控制语言，用来定义数据库的访问全新和安全级别，及创建用户</p></blockquote> <h2 id="约束"><a href="#约束" class="header-anchor">#</a> 约束</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 约束=============================</span>
<span class="token comment">-- 创建员工表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp
<span class="token punctuation">(</span>
    id       <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> <span class="token comment">-- 员工ID,主键且自增长</span>
    eName    <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>   <span class="token comment">-- 员工姓名，非空且唯一</span>
    joinDate <span class="token keyword">DATE</span>         <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>          <span class="token comment">-- 入职日期，非空</span>
    salary   <span class="token keyword">DOUBLE</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>          <span class="token comment">-- 工资，非空</span>
    bonus    <span class="token keyword">DOUBLE</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span>          <span class="token comment">-- 奖金，如果没有奖金默认为0</span>

<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 插入数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp<span class="token punctuation">(</span>ID<span class="token punctuation">,</span> ENAME<span class="token punctuation">,</span> JOINDATE<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> BONUS<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'2022-9-5'</span><span class="token punctuation">,</span> <span class="token number">9000</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 主键约束Demo:非空且唯一</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp<span class="token punctuation">(</span>ID<span class="token punctuation">,</span> ENAME<span class="token punctuation">,</span> JOINDATE<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> BONUS<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'2022-9-5'</span><span class="token punctuation">,</span> <span class="token number">9000</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp<span class="token punctuation">(</span>ID<span class="token punctuation">,</span> ENAME<span class="token punctuation">,</span> JOINDATE<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> BONUS<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'2022-9-5'</span><span class="token punctuation">,</span> <span class="token number">9000</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 非空约束Demo</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp<span class="token punctuation">(</span>ID<span class="token punctuation">,</span> ENAME<span class="token punctuation">,</span> JOINDATE<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> BONUS<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'2022-9-5'</span><span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 唯一约束Demo</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp<span class="token punctuation">(</span>ID<span class="token punctuation">,</span> ENAME<span class="token punctuation">,</span> JOINDATE<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> BONUS<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'2022-9-5'</span><span class="token punctuation">,</span> <span class="token number">9000</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 默认约束Demo</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp<span class="token punctuation">(</span>ID<span class="token punctuation">,</span> ENAME<span class="token punctuation">,</span> JOINDATE<span class="token punctuation">,</span> SALARY<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token string">'2022-9-5'</span><span class="token punctuation">,</span> <span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- 外键约束 ------------------</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 创建部门表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> depart<span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    depName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    address <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 创建员工表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp<span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    age <span class="token keyword">INT</span><span class="token punctuation">,</span>
    depID <span class="token keyword">int</span><span class="token punctuation">,</span>
    <span class="token comment">-- 添加外键 depID 关联 depart 表的id主键</span>
    <span class="token keyword">CONSTRAINT</span> fk_emp_depart <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>depID<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> depart<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 删除外键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> fk_emp_depart<span class="token punctuation">;</span>
<span class="token comment">-- 建完表后，添加外键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp <span class="token keyword">ADD</span>  <span class="token keyword">CONSTRAINT</span> fk_emp_depart <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>depID<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> depart<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="多表关系"><a href="#多表关系" class="header-anchor">#</a> 多表关系</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 多对多关系演示===================</span>
<span class="token comment">-- 订单表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_order<span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    payment <span class="token keyword">DOUBLE</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    payment_type <span class="token keyword">TINYINT</span><span class="token punctuation">,</span>
    <span class="token keyword">status</span> <span class="token keyword">TINYINT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 商品表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_goods<span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    title <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price <span class="token keyword">DOUBLE</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 订单商品中间表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_order_goods<span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    order_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
    goods_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
    count <span class="token keyword">INT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 创建外键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tb_order_goods <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fk_order_id <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>order_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> tb_order<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tb_order_goods <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fk_goods_id <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>goods_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> tb_goods<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 一对一关系演示 ==================</span>
<span class="token comment">-- 后创建</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_user<span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    photo <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    nickname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    age <span class="token keyword">INT</span><span class="token punctuation">,</span>
    gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    desc_id <span class="token keyword">INT</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span> <span class="token comment">-- 唯一外键</span>
    <span class="token keyword">CONSTRAINT</span> fk_desc_id <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>desc_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> tb_user_desc<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_user_desc<span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    city <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    edu <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    income <span class="token keyword">DOUBLE</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="多表查询"><a href="#多表查询" class="header-anchor">#</a> 多表查询</h2> <ul><li><p>内连接</p> <blockquote><p>查询两张表交集的数据</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 隐式内连接</span>
<span class="token keyword">SELECT</span> 字段列表 <span class="token keyword">FROM</span> 表<span class="token number">1</span><span class="token punctuation">,</span>表<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span>
<span class="token comment">-- 显示内连接</span>
<span class="token keyword">SELECT</span> 字段列表 <span class="token keyword">FROM</span> 表<span class="token number">1</span> <span class="token punctuation">[</span><span class="token keyword">INNER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> 表<span class="token number">2</span> <span class="token keyword">ON</span> 条件<span class="token punctuation">;</span>
</code></pre></div><div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 隐式内连接 ===================================</span>
<span class="token comment">-- 查询emp的name,gender,dept表的dName</span>
<span class="token keyword">SELECT</span> emp<span class="token punctuation">.</span>name<span class="token punctuation">,</span> emp<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> dept<span class="token punctuation">.</span>dName
<span class="token keyword">FROM</span> emp<span class="token punctuation">,</span>
    dept
<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>dep_id <span class="token operator">=</span> dept<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
<span class="token comment">-- 给表起别名</span>
<span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>dName
<span class="token keyword">FROM</span> emp t1<span class="token punctuation">,</span>
    dept t2
<span class="token keyword">WHERE</span> t1<span class="token punctuation">.</span>dep_id <span class="token operator">=</span> t2<span class="token punctuation">.</span>did<span class="token punctuation">;</span>


<span class="token comment">-- 显示内连接</span>
<span class="token keyword">SELECT</span> emp<span class="token punctuation">.</span>id<span class="token punctuation">,</span> emp<span class="token punctuation">.</span>name<span class="token punctuation">,</span> emp<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> dept<span class="token punctuation">.</span>did
<span class="token keyword">FROM</span> emp
        <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> dept <span class="token keyword">ON</span> emp<span class="token punctuation">.</span>dep_id <span class="token operator">=</span> dept<span class="token punctuation">.</span>did<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> emp<span class="token punctuation">.</span>id<span class="token punctuation">,</span> emp<span class="token punctuation">.</span>name<span class="token punctuation">,</span> emp<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> dept<span class="token punctuation">.</span>did
<span class="token keyword">FROM</span> emp
        <span class="token keyword">JOIN</span> dept <span class="token keyword">ON</span> emp<span class="token punctuation">.</span>dep_id <span class="token operator">=</span> dept<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>外连接</p> <blockquote><p>查询一张表的全部数据和另一张表的交集部分</p></blockquote> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 左外连接</span>
<span class="token keyword">SELECT</span> 字段列表
<span class="token keyword">FROM</span> 表一
         <span class="token keyword">LEFT</span> <span class="token punctuation">[</span><span class="token keyword">OUTER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> 表<span class="token number">2</span> （别名） <span class="token keyword">on</span> 条件<span class="token punctuation">;</span>

<span class="token comment">-- 右外连接</span>
<span class="token keyword">SELECT</span> 字段列表
<span class="token keyword">FROM</span> 表一
         <span class="token keyword">RIGHT</span> <span class="token punctuation">[</span><span class="token keyword">OUTER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> 表<span class="token number">2</span> （别名） <span class="token keyword">on</span> 条件<span class="token punctuation">;</span>
</code></pre></div><div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 外连接====================================</span>
<span class="token comment">-- 左外连接</span>
<span class="token keyword">SELECT</span> emp<span class="token punctuation">.</span>id<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> join_date<span class="token punctuation">,</span> dep_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dName
<span class="token keyword">FROM</span> emp
         <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> dept d <span class="token keyword">on</span> d<span class="token punctuation">.</span>did <span class="token operator">=</span> emp<span class="token punctuation">.</span>dep_id<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> emp<span class="token punctuation">.</span>id<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> join_date<span class="token punctuation">,</span> dep_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dName
<span class="token keyword">FROM</span> emp
         <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> dept d <span class="token keyword">on</span> d<span class="token punctuation">.</span>did <span class="token operator">=</span> emp<span class="token punctuation">.</span>dep_id<span class="token punctuation">;</span>

<span class="token comment">-- 右外连接</span>
<span class="token keyword">SELECT</span> emp<span class="token punctuation">.</span>id<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> join_date<span class="token punctuation">,</span> dep_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dName
<span class="token keyword">FROM</span> emp
         <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> dept d <span class="token keyword">on</span> d<span class="token punctuation">.</span>did <span class="token operator">=</span> emp<span class="token punctuation">.</span>dep_id<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>子查询</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 单行单列 作为条件值</span>
<span class="token keyword">SELECT</span> 字段列表
<span class="token keyword">FROM</span> 表
<span class="token keyword">WHERE</span> 字段名 （<span class="token operator">=</span> <span class="token operator">!=</span> <span class="token operator">&lt;</span> <span class="token operator">&gt;</span>） <span class="token punctuation">(</span>子查询<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 多行单列 作为条件值</span>
<span class="token keyword">SELECT</span> 字段列表
<span class="token keyword">FROM</span> 表
<span class="token keyword">WHERE</span> 字段名 <span class="token operator">in</span> <span class="token punctuation">(</span>子查询<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 多行多列 作为虚拟表</span>
<span class="token keyword">SELECT</span> 字段列表
<span class="token keyword">FROM</span> （子查询）表名
<span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span>
</code></pre></div><div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 子查询===========================</span>
<span class="token comment">-- 查询比猪八戒工资高的员工的姓名和工资</span>
<span class="token keyword">SELECT</span> salary
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> NAME <span class="token operator">=</span> <span class="token string">'猪八戒'</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> salary
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> salary <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> NAME <span class="token operator">=</span> <span class="token string">'猪八戒'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- 查询‘财务部’和‘市场部’所有的员工信息</span>
<span class="token keyword">SELECT</span> did
<span class="token keyword">FROM</span> dept
<span class="token keyword">WHERE</span> dName <span class="token operator">=</span> <span class="token string">'财务部'</span>
   <span class="token operator">OR</span> dName <span class="token operator">=</span> <span class="token string">'市场部'</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> GENDER<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> JOIN_DATE<span class="token punctuation">,</span> DEP_ID
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> dep_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> did <span class="token keyword">FROM</span> dept <span class="token keyword">WHERE</span> dName <span class="token operator">=</span> <span class="token string">'财务部'</span> <span class="token operator">OR</span> dName <span class="token operator">=</span> <span class="token string">'市场部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- 查询入职日期是‘2011-11-11’之后的员工和部门信息</span>
<span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> GENDER<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> JOIN_DATE<span class="token punctuation">,</span> DEP_ID
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> join_date <span class="token operator">&gt;</span> <span class="token string">'2011-11-11'</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> GENDER<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> JOIN_DATE<span class="token punctuation">,</span> DEP_ID<span class="token punctuation">,</span> DID<span class="token punctuation">,</span> DNAME
<span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> GENDER<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> JOIN_DATE<span class="token punctuation">,</span> DEP_ID <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> join_date <span class="token operator">&gt;</span> <span class="token string">'2011-11-11'</span><span class="token punctuation">)</span> t1<span class="token punctuation">,</span>
     dept
<span class="token keyword">WHERE</span> dep_id <span class="token operator">=</span> dept<span class="token punctuation">.</span>did<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> GENDER<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> JOIN_DATE<span class="token punctuation">,</span> DEP_ID<span class="token punctuation">,</span> DID<span class="token punctuation">,</span> DNAME
<span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> GENDER<span class="token punctuation">,</span> SALARY<span class="token punctuation">,</span> JOIN_DATE<span class="token punctuation">,</span> DEP_ID <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> join_date <span class="token operator">&gt;</span> <span class="token string">'2011-11-11'</span><span class="token punctuation">)</span> t1
         <span class="token keyword">JOIN</span>
     dept
     <span class="token keyword">ON</span> dep_id <span class="token operator">=</span> dept<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>多表查询练习</p></li></ul> <p><img src="images/image-20220906160240451.png" alt="image-20220906160240451"></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 多表查询 练习 ===================================</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> emp<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> dept<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> job<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> salaryGrade<span class="token punctuation">;</span>


<span class="token comment">-- 部门表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dept
<span class="token punctuation">(</span>
    id    <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span> <span class="token comment">-- 部门id</span>
    dName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                 <span class="token comment">-- 部门名称</span>
    loc   <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>                  <span class="token comment">-- 部门所在地</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- 职务表，职务名称，职务描述</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> job
<span class="token punctuation">(</span>
    id          <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    jName       <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    description <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 员工表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp
<span class="token punctuation">(</span>
    id       <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span> <span class="token comment">-- 员工id</span>
    eName    <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">-- 员工姓名</span>
    job_id   <span class="token keyword">INT</span><span class="token punctuation">,</span>             <span class="token comment">-- 职务id</span>
    mgr      <span class="token keyword">INT</span><span class="token punctuation">,</span>             <span class="token comment">-- 上级领导</span>
    joinDate <span class="token keyword">DATE</span><span class="token punctuation">,</span>            <span class="token comment">-- 入职日期</span>
    salary   <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment">-- 工资</span>
    bonus    <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment">-- 奖金</span>
    dept_id  <span class="token keyword">INT</span><span class="token punctuation">,</span>             <span class="token comment">-- 所在部门编号</span>
    <span class="token keyword">CONSTRAINT</span> emp_jobId_ref_job_id_fk <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>job_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> job <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">CONSTRAINT</span> emp_deptId_ref_dept_id_fk <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>dept_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> dept <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 工资等级表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> salaryGrade
<span class="token punctuation">(</span>
    grade    <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span> <span class="token comment">-- 级别</span>
    loSalary <span class="token keyword">INT</span><span class="token punctuation">,</span>             <span class="token comment">-- 最低工资</span>
    hiSalary <span class="token keyword">INT</span>              <span class="token comment">-- 最高工资</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加4个部门</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> dept<span class="token punctuation">(</span>id<span class="token punctuation">,</span> dname<span class="token punctuation">,</span> loc<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'教研部'</span><span class="token punctuation">,</span> <span class="token string">'北京'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'学工部'</span><span class="token punctuation">,</span> <span class="token string">'上海'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">'销售部'</span><span class="token punctuation">,</span> <span class="token string">'广州'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token string">'财务部'</span><span class="token punctuation">,</span> <span class="token string">'深圳'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加4个职务</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> job <span class="token punctuation">(</span>id<span class="token punctuation">,</span> jname<span class="token punctuation">,</span> description<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'董事长'</span><span class="token punctuation">,</span> <span class="token string">'管理整个公司，接单'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'经理'</span><span class="token punctuation">,</span> <span class="token string">'管理部门员工'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'销售员'</span><span class="token punctuation">,</span> <span class="token string">'向客人推销产品'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'文员'</span><span class="token punctuation">,</span> <span class="token string">'使用办公软件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- 添加员工</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp<span class="token punctuation">(</span>id<span class="token punctuation">,</span> ename<span class="token punctuation">,</span> job_id<span class="token punctuation">,</span> mgr<span class="token punctuation">,</span> joindate<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> bonus<span class="token punctuation">,</span> dept_id<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token string">'孙悟空'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1004</span><span class="token punctuation">,</span> <span class="token string">'2000-12-17'</span><span class="token punctuation">,</span> <span class="token string">'8000.00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token string">'卢俊义'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'2001-02-20'</span><span class="token punctuation">,</span> <span class="token string">'16000.00'</span><span class="token punctuation">,</span> <span class="token string">'3000.00'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1003</span><span class="token punctuation">,</span> <span class="token string">'林冲'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'2001-02-22'</span><span class="token punctuation">,</span> <span class="token string">'12500.00'</span><span class="token punctuation">,</span> <span class="token string">'5000.00'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1004</span><span class="token punctuation">,</span> <span class="token string">'唐僧'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1009</span><span class="token punctuation">,</span> <span class="token string">'2001-04-02'</span><span class="token punctuation">,</span> <span class="token string">'29750.00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1005</span><span class="token punctuation">,</span> <span class="token string">'李逵'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'2001-09-28'</span><span class="token punctuation">,</span> <span class="token string">'12500.00'</span><span class="token punctuation">,</span> <span class="token string">'14000.00'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'宋江'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1009</span><span class="token punctuation">,</span> <span class="token string">'2001-05-01'</span><span class="token punctuation">,</span> <span class="token string">'28500.00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1007</span><span class="token punctuation">,</span> <span class="token string">'刘备'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1009</span><span class="token punctuation">,</span> <span class="token string">'2001-09-01'</span><span class="token punctuation">,</span> <span class="token string">'24500.00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1008</span><span class="token punctuation">,</span> <span class="token string">'猪八戒'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1004</span><span class="token punctuation">,</span> <span class="token string">'2007-04-19'</span><span class="token punctuation">,</span> <span class="token string">'30000.00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1009</span><span class="token punctuation">,</span> <span class="token string">'罗贯中'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'2001-11-17'</span><span class="token punctuation">,</span> <span class="token string">'50000.00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1010</span><span class="token punctuation">,</span> <span class="token string">'吴用'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'2001-09-08'</span><span class="token punctuation">,</span> <span class="token string">'15000.00'</span><span class="token punctuation">,</span> <span class="token string">'0.00'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1011</span><span class="token punctuation">,</span> <span class="token string">'沙僧'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1004</span><span class="token punctuation">,</span> <span class="token string">'2007-05-23'</span><span class="token punctuation">,</span> <span class="token string">'11000.00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1012</span><span class="token punctuation">,</span> <span class="token string">'李逵'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'2001-12-03'</span><span class="token punctuation">,</span> <span class="token string">'9500.00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1013</span><span class="token punctuation">,</span> <span class="token string">'小白龙'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1004</span><span class="token punctuation">,</span> <span class="token string">'2001-12-03'</span><span class="token punctuation">,</span> <span class="token string">'30000.00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">1014</span><span class="token punctuation">,</span> <span class="token string">'关羽'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1007</span><span class="token punctuation">,</span> <span class="token string">'2002-01-23'</span><span class="token punctuation">,</span> <span class="token string">'13000.00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- 添加5个工资等级</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salaryGrade<span class="token punctuation">(</span>grade<span class="token punctuation">,</span> loSalary<span class="token punctuation">,</span> hisalary<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7000</span><span class="token punctuation">,</span> <span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12010</span><span class="token punctuation">,</span> <span class="token number">14000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">14010</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">20010</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">30010</span><span class="token punctuation">,</span> <span class="token number">99990</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 1.查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述</span>
<span class="token keyword">SELECT</span> emp<span class="token punctuation">.</span>id      <span class="token string">'员工编号'</span><span class="token punctuation">,</span>
       eName       <span class="token string">'员工姓名'</span><span class="token punctuation">,</span>
       salary      <span class="token string">'工资'</span><span class="token punctuation">,</span>
       jName       <span class="token string">'职务名称'</span><span class="token punctuation">,</span>
       description <span class="token string">'职务描述'</span>
<span class="token keyword">FROM</span> emp
         <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> job j <span class="token keyword">ON</span> emp<span class="token punctuation">.</span>job_id <span class="token operator">=</span> j<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

<span class="token comment">-- 2.查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置</span>
<span class="token keyword">SELECT</span> emp<span class="token punctuation">.</span>id 员工编号<span class="token punctuation">,</span> eName 姓名<span class="token punctuation">,</span> salary 工资<span class="token punctuation">,</span> jName 职务<span class="token punctuation">,</span> description 描述<span class="token punctuation">,</span> dName 部门<span class="token punctuation">,</span> loc 位置
<span class="token keyword">FROM</span> emp
         <span class="token keyword">JOIN</span> JavaWebDB2<span class="token punctuation">.</span>job j <span class="token keyword">on</span> j<span class="token punctuation">.</span>id <span class="token operator">=</span> emp<span class="token punctuation">.</span>job_id
         <span class="token keyword">JOIN</span> dept d <span class="token keyword">on</span> d<span class="token punctuation">.</span>id <span class="token operator">=</span> emp<span class="token punctuation">.</span>dept_id<span class="token punctuation">;</span>

<span class="token comment">-- 3.查询员工姓名，工资，工资等级</span>
<span class="token keyword">SELECT</span> eName<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> t<span class="token punctuation">.</span>grade
<span class="token keyword">FROM</span> emp<span class="token punctuation">,</span>
     salaryGrade t
<span class="token keyword">WHERE</span> salary <span class="token operator">BETWEEN</span> t<span class="token punctuation">.</span>loSalary <span class="token operator">AND</span> t<span class="token punctuation">.</span>hiSalary<span class="token punctuation">;</span>

<span class="token comment">-- 4.查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</span>
<span class="token keyword">SELECT</span> eName 员工姓名<span class="token punctuation">,</span> salary 工资<span class="token punctuation">,</span> jName 职务名称<span class="token punctuation">,</span> description 职务描述<span class="token punctuation">,</span> dName 部门名称<span class="token punctuation">,</span> loc 部门位置<span class="token punctuation">,</span> grade 工资等级
<span class="token keyword">FROM</span> emp
         <span class="token keyword">JOIN</span> job j <span class="token keyword">on</span> emp<span class="token punctuation">.</span>job_id <span class="token operator">=</span> j<span class="token punctuation">.</span>id
         <span class="token keyword">JOIN</span> dept d <span class="token keyword">on</span> emp<span class="token punctuation">.</span>dept_id <span class="token operator">=</span> d<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
     salaryGrade t3
<span class="token keyword">WHERE</span> salary <span class="token operator">BETWEEN</span> t3<span class="token punctuation">.</span>loSalary <span class="token operator">AND</span> t3<span class="token punctuation">.</span>hiSalary<span class="token punctuation">;</span>

<span class="token comment">-- 5.查询出部门编号、部门名称、部门位置、部门人数</span>
<span class="token keyword">SELECT</span> dept_id<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> dept_id<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> d<span class="token punctuation">.</span>id<span class="token punctuation">,</span>dName<span class="token punctuation">,</span>loc<span class="token punctuation">,</span>e<span class="token punctuation">.</span>count
<span class="token keyword">FROM</span> dept d<span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token keyword">SELECT</span> dept_id<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> count <span class="token keyword">FROM</span> emp <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> dept_id<span class="token punctuation">)</span> e
<span class="token keyword">WHERE</span> d<span class="token punctuation">.</span>id <span class="token operator">=</span>  e<span class="token punctuation">.</span>dept_id<span class="token punctuation">;</span>
</code></pre></div><ul><li><p>事务</p> <blockquote><ul><li>原子性（Atomicity）:事务是最小操作单位，要么同时成功，要么同时失败</li> <li>一致性（Consistency）：事务完成时，必须使所有数据都保持一致状态</li> <li>隔离性（Isolation）：多个事务之间，操作的可见性</li> <li>持久性（Durability）：事务一旦提交或回滚，它对数据的改变就是永久的</li></ul></blockquote></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 事务 ===================</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> account
<span class="token punctuation">(</span>
    id    <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    name  <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    money <span class="token keyword">DOUBLE</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> account<span class="token punctuation">(</span>NAME<span class="token punctuation">,</span> MONEY<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span>money <span class="token keyword">FROM</span> account<span class="token punctuation">;</span>
<span class="token comment">-- 转账事务 =================</span>
<span class="token comment">-- 开启事务</span>
<span class="token keyword">BEGIN</span><span class="token punctuation">;</span>
<span class="token comment">-- 判断李四余额</span>


<span class="token comment">-- 李四金额 -500</span>
<span class="token keyword">UPDATE</span> account
<span class="token keyword">SET</span> money <span class="token operator">=</span> money <span class="token operator">-</span> <span class="token number">500</span>
<span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'李四'</span><span class="token punctuation">;</span>

<span class="token comment">-- 出错！！！！</span>

<span class="token comment">-- 张三余额 +500</span>
<span class="token keyword">UPDATE</span> account
<span class="token keyword">SET</span> money <span class="token operator">=</span> money <span class="token operator">+</span> <span class="token number">500</span>
<span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'张三'</span><span class="token punctuation">;</span>

<span class="token comment">-- 提交事务</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>

<span class="token comment">-- 回滚事务</span>
<span class="token keyword">ROLLBACK</span> <span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/basics/Java常用API.html" class="prev">
        Java常用API
      </a></span> <span class="next"><a href="/basics/设计模式.html">
        设计模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4552e9ca.js" defer></script><script src="/assets/js/2.245720e2.js" defer></script><script src="/assets/js/19.38817534.js" defer></script>
  </body>
</html>
